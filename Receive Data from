import serial
import binascii

# Replace the serial port name with the correct port for your Nextion display
serial_port = '/dev/ttyUSB0'

# Set the baud rate to match the Nextion display (default is 9600)
baud_rate = 9600

# Create a serial connection to the Nextion display
ser = serial.Serial(serial_port, baud_rate, timeout=1)

def read_text_component(component):
    # Send the command to get the value of the text component
    command = component + ".txt"
    ser.write(command.encode())

    # Read the response (data) from the Nextion display as raw bytes
    data = ser.readline().strip()

    # Convert the data from hex format to a string
    data_str = binascii.hexlify(data).decode()

    # Handle the data (e.g., process, print, etc.)
    print(f"{component}: {data_str}")

try:
    while True:
        # Read data from the Nextion display
        read_text_component("t0")
        read_text_component("t1")
except KeyboardInterrupt:
    print("Exiting...")
finally:
    # Close the serial connection
    ser.close()
